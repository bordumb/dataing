/**
 * Generated by orval v6.31.0 ðŸº
 * Do not edit manually.
 * dataing
 * Autonomous Data Quality Investigation
 * OpenAPI spec version: 2.0.0
 */
import { useMutation, useQuery } from "@tanstack/react-query";
import type {
  MutationFunction,
  QueryFunction,
  QueryKey,
  UseMutationOptions,
  UseMutationResult,
  UseQueryOptions,
  UseQueryResult,
} from "@tanstack/react-query";
import type {
  CreateInvestigationRequest,
  HTTPValidationError,
  InvestigationResponse,
  InvestigationStatusResponse,
  ListInvestigationsApiV1InvestigationsGet200Item,
} from "../../model";
import { customInstance } from "../../client";

/**
 * Start a new investigation.

This endpoint starts an investigation in the background
and returns immediately with the investigation ID.

The investigation will query the tenant's actual data source
(e.g., DuckDB with parquet files) instead of just metadata.
 * @summary Create Investigation
 */
export const createInvestigationApiV1InvestigationsPost = (
  createInvestigationRequest: CreateInvestigationRequest,
) => {
  return customInstance<InvestigationResponse>({
    url: `/api/v1/investigations/`,
    method: "POST",
    headers: { "Content-Type": "application/json" },
    data: createInvestigationRequest,
  });
};

export const getCreateInvestigationApiV1InvestigationsPostMutationOptions = <
  TError = HTTPValidationError,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>,
    TError,
    { data: CreateInvestigationRequest },
    TContext
  >;
}): UseMutationOptions<
  Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>,
  TError,
  { data: CreateInvestigationRequest },
  TContext
> => {
  const { mutation: mutationOptions } = options ?? {};

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>,
    { data: CreateInvestigationRequest }
  > = (props) => {
    const { data } = props ?? {};

    return createInvestigationApiV1InvestigationsPost(data);
  };

  return { mutationFn, ...mutationOptions };
};

export type CreateInvestigationApiV1InvestigationsPostMutationResult =
  NonNullable<
    Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>
  >;
export type CreateInvestigationApiV1InvestigationsPostMutationBody =
  CreateInvestigationRequest;
export type CreateInvestigationApiV1InvestigationsPostMutationError =
  HTTPValidationError;

/**
 * @summary Create Investigation
 */
export const useCreateInvestigationApiV1InvestigationsPost = <
  TError = HTTPValidationError,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>,
    TError,
    { data: CreateInvestigationRequest },
    TContext
  >;
}): UseMutationResult<
  Awaited<ReturnType<typeof createInvestigationApiV1InvestigationsPost>>,
  TError,
  { data: CreateInvestigationRequest },
  TContext
> => {
  const mutationOptions =
    getCreateInvestigationApiV1InvestigationsPostMutationOptions(options);

  return useMutation(mutationOptions);
};
/**
 * Get investigation status and results.
 * @summary Get Investigation
 */
export const getInvestigationApiV1InvestigationsInvestigationIdGet = (
  investigationId: string,
  signal?: AbortSignal,
) => {
  return customInstance<InvestigationStatusResponse>({
    url: `/api/v1/investigations/${investigationId}`,
    method: "GET",
    signal,
  });
};

export const getGetInvestigationApiV1InvestigationsInvestigationIdGetQueryKey =
  (investigationId: string) => {
    return [`/api/v1/investigations/${investigationId}`] as const;
  };

export const getGetInvestigationApiV1InvestigationsInvestigationIdGetQueryOptions =
  <
    TData = Awaited<
      ReturnType<typeof getInvestigationApiV1InvestigationsInvestigationIdGet>
    >,
    TError = HTTPValidationError,
  >(
    investigationId: string,
    options?: {
      query?: Partial<
        UseQueryOptions<
          Awaited<
            ReturnType<
              typeof getInvestigationApiV1InvestigationsInvestigationIdGet
            >
          >,
          TError,
          TData
        >
      >;
    },
  ) => {
    const { query: queryOptions } = options ?? {};

    const queryKey =
      queryOptions?.queryKey ??
      getGetInvestigationApiV1InvestigationsInvestigationIdGetQueryKey(
        investigationId,
      );

    const queryFn: QueryFunction<
      Awaited<
        ReturnType<typeof getInvestigationApiV1InvestigationsInvestigationIdGet>
      >
    > = ({ signal }) =>
      getInvestigationApiV1InvestigationsInvestigationIdGet(
        investigationId,
        signal,
      );

    return {
      queryKey,
      queryFn,
      enabled: !!investigationId,
      ...queryOptions,
    } as UseQueryOptions<
      Awaited<
        ReturnType<typeof getInvestigationApiV1InvestigationsInvestigationIdGet>
      >,
      TError,
      TData
    > & { queryKey: QueryKey };
  };

export type GetInvestigationApiV1InvestigationsInvestigationIdGetQueryResult =
  NonNullable<
    Awaited<
      ReturnType<typeof getInvestigationApiV1InvestigationsInvestigationIdGet>
    >
  >;
export type GetInvestigationApiV1InvestigationsInvestigationIdGetQueryError =
  HTTPValidationError;

/**
 * @summary Get Investigation
 */
export const useGetInvestigationApiV1InvestigationsInvestigationIdGet = <
  TData = Awaited<
    ReturnType<typeof getInvestigationApiV1InvestigationsInvestigationIdGet>
  >,
  TError = HTTPValidationError,
>(
  investigationId: string,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<
          ReturnType<
            typeof getInvestigationApiV1InvestigationsInvestigationIdGet
          >
        >,
        TError,
        TData
      >
    >;
  },
): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions =
    getGetInvestigationApiV1InvestigationsInvestigationIdGetQueryOptions(
      investigationId,
      options,
    );

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & {
    queryKey: QueryKey;
  };

  query.queryKey = queryOptions.queryKey;

  return query;
};

/**
 * SSE stream of investigation events.

Returns a Server-Sent Events stream that pushes
new events as they occur during the investigation.
 * @summary Stream Events
 */
export const streamEventsApiV1InvestigationsInvestigationIdEventsGet = (
  investigationId: string,
  signal?: AbortSignal,
) => {
  return customInstance<unknown>({
    url: `/api/v1/investigations/${investigationId}/events`,
    method: "GET",
    signal,
  });
};

export const getStreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryKey =
  (investigationId: string) => {
    return [`/api/v1/investigations/${investigationId}/events`] as const;
  };

export const getStreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryOptions =
  <
    TData = Awaited<
      ReturnType<typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet>
    >,
    TError = HTTPValidationError,
  >(
    investigationId: string,
    options?: {
      query?: Partial<
        UseQueryOptions<
          Awaited<
            ReturnType<
              typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet
            >
          >,
          TError,
          TData
        >
      >;
    },
  ) => {
    const { query: queryOptions } = options ?? {};

    const queryKey =
      queryOptions?.queryKey ??
      getStreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryKey(
        investigationId,
      );

    const queryFn: QueryFunction<
      Awaited<
        ReturnType<
          typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet
        >
      >
    > = ({ signal }) =>
      streamEventsApiV1InvestigationsInvestigationIdEventsGet(
        investigationId,
        signal,
      );

    return {
      queryKey,
      queryFn,
      enabled: !!investigationId,
      ...queryOptions,
    } as UseQueryOptions<
      Awaited<
        ReturnType<
          typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet
        >
      >,
      TError,
      TData
    > & { queryKey: QueryKey };
  };

export type StreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryResult =
  NonNullable<
    Awaited<
      ReturnType<typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet>
    >
  >;
export type StreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryError =
  HTTPValidationError;

/**
 * @summary Stream Events
 */
export const useStreamEventsApiV1InvestigationsInvestigationIdEventsGet = <
  TData = Awaited<
    ReturnType<typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet>
  >,
  TError = HTTPValidationError,
>(
  investigationId: string,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<
          ReturnType<
            typeof streamEventsApiV1InvestigationsInvestigationIdEventsGet
          >
        >,
        TError,
        TData
      >
    >;
  },
): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions =
    getStreamEventsApiV1InvestigationsInvestigationIdEventsGetQueryOptions(
      investigationId,
      options,
    );

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & {
    queryKey: QueryKey;
  };

  query.queryKey = queryOptions.queryKey;

  return query;
};

/**
 * List all investigations for the current tenant.

Results are filtered by RBAC permissions when user_id is available.
Admins and owners see all investigations; members see only those
they have access to via direct grants, tags, teams, or datasources.
 * @summary List Investigations
 */
export const listInvestigationsApiV1InvestigationsGet = (
  signal?: AbortSignal,
) => {
  return customInstance<ListInvestigationsApiV1InvestigationsGet200Item[]>({
    url: `/api/v1/investigations`,
    method: "GET",
    signal,
  });
};

export const getListInvestigationsApiV1InvestigationsGetQueryKey = () => {
  return [`/api/v1/investigations`] as const;
};

export const getListInvestigationsApiV1InvestigationsGetQueryOptions = <
  TData = Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>,
  TError = unknown,
>(options?: {
  query?: Partial<
    UseQueryOptions<
      Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>,
      TError,
      TData
    >
  >;
}) => {
  const { query: queryOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ??
    getListInvestigationsApiV1InvestigationsGetQueryKey();

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>
  > = ({ signal }) => listInvestigationsApiV1InvestigationsGet(signal);

  return { queryKey, queryFn, ...queryOptions } as UseQueryOptions<
    Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>,
    TError,
    TData
  > & { queryKey: QueryKey };
};

export type ListInvestigationsApiV1InvestigationsGetQueryResult = NonNullable<
  Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>
>;
export type ListInvestigationsApiV1InvestigationsGetQueryError = unknown;

/**
 * @summary List Investigations
 */
export const useListInvestigationsApiV1InvestigationsGet = <
  TData = Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>,
  TError = unknown,
>(options?: {
  query?: Partial<
    UseQueryOptions<
      Awaited<ReturnType<typeof listInvestigationsApiV1InvestigationsGet>>,
      TError,
      TData
    >
  >;
}): UseQueryResult<TData, TError> & { queryKey: QueryKey } => {
  const queryOptions =
    getListInvestigationsApiV1InvestigationsGetQueryOptions(options);

  const query = useQuery(queryOptions) as UseQueryResult<TData, TError> & {
    queryKey: QueryKey;
  };

  query.queryKey = queryOptions.queryKey;

  return query;
};
